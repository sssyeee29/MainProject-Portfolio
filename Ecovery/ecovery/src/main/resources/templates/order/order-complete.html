<!--
ì—ì½”ë§ˆì¼“ ì£¼ë¬¸ì™„ë£Œ í˜ì´ì§€
- ì£¼ë¬¸ ì™„ë£Œ í›„ ì‚¬ìš©ìì—ê²Œ ì£¼ë¬¸ ì •ë³´, ìƒí’ˆ ì •ë³´, ë°°ì†¡/ê²°ì œ ìš”ì•½ì„ ì œê³µ
- ì£¼ë¬¸ ìƒíƒœ, ìƒí’ˆ ëª©ë¡, ë°°ì†¡ì§€, ê²°ì œ ë°©ì‹ ë“±ì„ ìƒì„¸íˆ í‘œì‹œ
- í›„ê¸° ì‘ì„±, êµí™˜/ë°˜í’ˆ ì‹ ì²­, Q&A, ì˜ìˆ˜ì¦ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ í¬í•¨
- ì£¼ë¬¸ ìƒì„¸ ê³µí†µ CSS ì¬ì‚¬ìš©
- ì£¼ë¬¸ ì •ë³´ëŠ” Thymeleaf í…œí”Œë¦¿ + JavaScriptë¡œ ë™ì  í‘œì‹œ
- êµí™˜/ë°˜í’ˆ ëª¨ë‹¬ UI í¬í•¨

@author : eunji
@fileName : order-complete.html
@since : 250804
@history
  - 250804 | yukyeong | ì£¼ë¬¸ì™„ë£Œ í˜ì´ì§€ ìˆ˜ì •
                        - ì£¼ë¬¸ ì •ë³´/ìƒí’ˆ/ë°°ì†¡/ê²°ì œ/ë²„íŠ¼ ì„¹ì…˜ êµ¬ì„±
                        - order-detail.css ì¬ì‚¬ìš© êµ¬ì¡°ë¡œ ìŠ¤íƒ€ì¼ í†µì¼
                        - ì£¼ë¬¸ ìƒíƒœ í…ìŠ¤íŠ¸ Thymeleafë¡œ ì¡°ê±´ ë¶„ê¸° ì²˜ë¦¬
                        - ì£¼ë¬¸ ìƒí’ˆ ë°˜ë³µ ë Œë”ë§ + ì—ëŸ¬ ì‹œ SVG ëŒ€ì²´ ì´ë¯¸ì§€ ì²˜ë¦¬
  - 250808 | sehui | (50,000ì› ì´ìƒ ë¬´ë£Œë°°ì†¡) ì‚­ì œ
-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<head th:with="pageTitle='ì—ì½”ë§ˆì¼“ - ì£¼ë¬¸ì™„ë£Œ'">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>ì—ì½”ë§ˆì¼“</title>
    <th:block layout:fragment="css">
        <!-- ê¸°ì¡´ order-detail CSS íŒŒì¼ ì—°ê²° (ì¬ì‚¬ìš©) -->
        <link rel="stylesheet" th:href="@{/css/order-detail.css}">
        <!-- í°íŠ¸ ì—°ê²° -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    </th:block>
</head>

<body>
<div layout:fragment="content" class="fade-in">
    <!-- ========================================
     ë©”ì¸ ì½˜í…ì¸  ì˜ì—­
     ======================================== -->
    <main id="mainContent">
        <!-- ================================
             ë¸Œë ˆë“œí¬ëŸ¼ ë„¤ë¹„ê²Œì´ì…˜
             ================================ -->
        <section class="breadcrumb-section">
            <div class="container">
                <nav class="breadcrumb">
                    <a th:href="@{/}">í™ˆ</a>
                    <span class="breadcrumb-separator">></span>
                    <a th:href="@{/eco}">ì—ì½”ë§ˆì¼“</a>
                    <span class="breadcrumb-separator">></span>
                    <span class="current-page">ì£¼ë¬¸ì™„ë£Œ</span>
                </nav>
            </div>
        </section>

        <!-- ================================
             ì£¼ë¬¸ ìƒì„¸ í—¤ë” - ì œëª©ê³¼ ë’¤ë¡œê°€ê¸°
             ================================ -->
        <section class="order-header">
            <div class="container">
                <div class="order-header-content">
                    <!-- ì œëª© ì˜ì—­ -->
                    <div class="order-title-section">
                        <h1>ğŸ“‹ ì£¼ë¬¸ì™„ë£Œ</h1>
                        <p class="order-subtitle">ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹ ë¥´ê²Œ ë°°ì†¡ ì¤€ë¹„ë¥¼ ì‹œì‘í• ê²Œìš” ğŸšš</p>
                    </div>
                    <button class="btn-back" onclick="location.href='/orders/list'">
                        <span class="back-icon">ğŸ§¾</span>
                        <span class="back-text">êµ¬ë§¤ì´ë ¥</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- ================================
             ì£¼ë¬¸ ìƒì„¸ ì •ë³´ ì„¹ì…˜ - ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒ
             ================================ -->
        <section class="order-details">
            <div class="container">
                <!-- ìƒˆë¡œìš´ ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ - ì„¸ë¡œí˜• ë ˆì´ì•„ì›ƒ -->
                <div class="order-layout-grid">

                    <!-- =====================
                         1. ì£¼ë¬¸ ê¸°ë³¸ ì •ë³´ ì¹´ë“œ (ì „ì²´ í­)
                         ===================== -->
                    <div class="order-info-card full-width">
                        <div class="card-header">
                            <h2 class="card-title">ğŸ“‹ ì£¼ë¬¸ ì •ë³´</h2>
                            <!-- ì£¼ë¬¸ ìƒíƒœ ë°°ì§€ -->
                            <div class="order-status-badge" id="orderStatusBadge">
                                <span class="status-text"
                                      th:text="${order.orderStatus.name() == 'READY' ? 'ê²°ì œëŒ€ê¸°' :
                                                (order.orderStatus.name() == 'ORDER' ? 'ê²°ì œì™„ë£Œ' :
                                                (order.orderStatus.name() == 'CANCEL' ? 'ì£¼ë¬¸ì·¨ì†Œ' : 'ìƒíƒœë¯¸í™•ì¸'))}">
                                    <!-- ì£¼ë¬¸ìƒíƒœ -->
                                </span>
                            </div>
                        </div>
                        <!-- ì£¼ë¬¸ ê¸°ë³¸ ì •ë³´ ê·¸ë¦¬ë“œ -->
                        <div class="order-basic-info">
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">ì£¼ë¬¸ë²ˆí˜¸</span>
                                    <span class="info-value" id="orderNumber" th:text="${order.orderUuid}"><!-- ì£¼ë¬¸ë²ˆí˜¸ --></span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">ì£¼ë¬¸ì¼ì</span>
                                    <span class="info-value" id="orderDate"
                                          th:text="${#dates.format(order.createdAt, 'yyyyë…„ Mì›” dì¼')}"><!-- ì£¼ë¬¸ì¼ì --></span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">ì£¼ë¬¸ì</span>
                                    <span class="info-value" id="orderName" th:text="${order.name}"><!-- ì£¼ë¬¸ì ì´ë¦„ --></span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">ì—°ë½ì²˜</span>
                                    <span class="info-value" id="orderPhone" th:text="${order.phoneNumber}"><!-- ì—°ë½ì²˜ --></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- =====================
                         2. ì£¼ë¬¸ ìƒí’ˆ ì •ë³´ ì¹´ë“œ (ì „ì²´ í­)
                         ===================== -->
                    <div class="order-product-card full-width">
                        <div class="card-header">
                            <h2 class="card-title">ğŸ“¦ ì£¼ë¬¸ ìƒí’ˆ</h2>
                            <!-- ìƒí’ˆ ê°œìˆ˜ í‘œì‹œ -->
                            <span class="product-count" id="productCount"
                                  th:text="'ì´ ' + ${order.orderItems.size()} + 'ê°œ ìƒí’ˆ'"><!-- ì´ ìƒí’ˆ --></span>
                        </div>
                        <!-- ì£¼ë¬¸ ìƒí’ˆ ëª©ë¡ -->
                        <div class="product-list" id="productList">
                            <!-- ì£¼ë¬¸ ìƒí’ˆ ëª©ë¡ ë°˜ë³µ ë Œë”ë§ -->
                            <div th:each="item : ${order.orderItems}" class="product-item">
                                <!-- ìƒí’ˆ ì´ë¯¸ì§€ -->
                                <div class="product-image">
                                    <img th:src="${item.imgUrl != null} ? ${item.imgUrl} : 'data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><rect fill=\'%23e3f2fd\' width=\'100\' height=\'100\'/><text x=\'50\' y=\'55\' font-size=\'40\' text-anchor=\'middle\'>ğŸ“¦</text></svg>'"
                                         th:alt="${item.itemName}"
                                         onerror="this.src='data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><rect fill=\'%23e3f2fd\' width=\'100\' height=\'100\'/><text x=\'50\' y=\'55\' font-size=\'40\' text-anchor=\'middle\'>ğŸ“¦</text></svg>'" />
                                </div>
                                <!-- ìƒí’ˆ ìƒì„¸ ì •ë³´ -->
                                <div class="product-details">
                                    <h3 class="product-name" th:text="${item.itemName}">ìƒí’ˆëª…</h3>
                                </div>
                                <!-- ìˆ˜ëŸ‰ ì •ë³´ -->
                                <div class="product-quantity">
                                    <span class="quantity-label">ìˆ˜ëŸ‰</span>
                                    <span class="quantity-value" th:text="${item.count} + 'ê°œ'"><!-- ìƒí’ˆ ìˆ˜ëŸ‰ --></span>
                                </div>
                                <!-- ê°€ê²© ì •ë³´ -->
                                <div class="product-price">
                                    <span class="unit-price"
                                          th:text="${#numbers.formatInteger(item.orderPrice / item.count, 3)} + 'ì›'"><!-- ìƒí’ˆ 1ê°œë‹¹ ê°€ê²© --></span>
                                    <span class="total-price"
                                          th:text="${#numbers.formatInteger(item.orderPrice, 3)} + 'ì›'"><!-- í•´ë‹¹ ìƒí’ˆ ì´ ê²°ì œê¸ˆì•¡ (ë‹¨ê°€ Ã— ìˆ˜ëŸ‰) --></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- =====================
                         3. ë°°ì†¡ì •ë³´ì™€ ê²°ì œì •ë³´ (1x2 ê·¸ë¦¬ë“œ)
                         ===================== -->
                    <div class="delivery-payment-section">

                        <!-- ë°°ì†¡ ì •ë³´ ì¹´ë“œ (ì™¼ìª½) -->
                        <div class="delivery-info-card">
                            <div class="card-header">
                                <h2 class="card-title">ğŸšš ë°°ì†¡ ì •ë³´</h2>
                                <!-- ë°°ì†¡ ì¡°íšŒ ë²„íŠ¼ -->
                                <button class="btn-track-delivery" onclick="trackDelivery()">
                                    <span class="track-icon">ğŸ”</span>
                                    <span class="track-text">ë°°ì†¡ì¡°íšŒ</span>
                                </button>
                            </div>

                            <div class="delivery-content">
                                <!-- ë°°ì†¡ ìƒíƒœ íƒ€ì„ë¼ì¸ -->
                                <div class="status-timeline">
                                    <!-- JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                                </div>

                                <!-- ë°°ì†¡ì§€ ì •ë³´ -->
                                <div class="delivery-address">
                                    <h3 class="address-title">ë°°ì†¡ì§€ ì •ë³´</h3>
                                    <div class="address-details">
                                        <div class="address-item">
                                            <span class="address-label">ë°›ëŠ”ë¶„</span>
                                            <span class="address-value" th:text="${order.name}"><!-- ë°›ëŠ”ë¶„ ì´ë¦„ --></span>
                                        </div>
                                        <div class="address-item">
                                            <span class="address-label">ì—°ë½ì²˜</span>
                                            <span class="address-value" th:text="${order.phoneNumber}"><!-- ì—°ë½ì²˜ --></span>
                                        </div>
                                        <div class="address-item">
                                            <span class="address-label">ì£¼ì†Œ</span>
                                            <span class="address-value">
                                                    <span th:text="${order.roadAddress}">ì£¼ì†Œ</span><br>
                                                    <span th:text="${order.detailAddress}" th:if="${order.detailAddress}"><!-- ì£¼ì†Œ --></span>
                                        </span>
                                        </div>
                                        <div class="address-item">
                                            <span class="address-label">ë°°ì†¡ìš”ì²­ì‚¬í•­</span>
                                            <span class="address-value">ë¶€ì¬ ì‹œ ê²½ë¹„ì‹¤ì— ë§¡ê²¨ì£¼ì„¸ìš”</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ê²°ì œ ì •ë³´ ì¹´ë“œ (ì˜¤ë¥¸ìª½) -->
                        <div class="payment-info-card">
                            <div class="card-header">
                                <h2 class="card-title">ğŸ’³ ê²°ì œ ì •ë³´</h2>
                            </div>
                            <div class="payment-content">
                                <!-- ê²°ì œ ìš”ì•½ ì •ë³´ -->
                                <div class="payment-summary">
                                    <div class="summary-row">
                                        <span class="summary-label">ìƒí’ˆê¸ˆì•¡</span>
                                        <span class="summary-value"
                                              th:text="${#numbers.formatInteger(order.payAmount, 3)} + 'ì›'"><!-- ìƒí’ˆê¸ˆì•¡ --></span>
                                    </div>
                                    <div class="summary-row">
                                        <span class="summary-label">ë°°ì†¡ë¹„</span>
                                        <span class="summary-value">0ì›</span>
                                    </div>
                                    <div class="summary-row discount">
                                        <span class="summary-label">í• ì¸ê¸ˆì•¡</span>
                                        <span class="summary-value">0ì›</span>
                                    </div>
                                    <div class="summary-row total">
                                        <span class="summary-label">ìµœì¢…ê²°ì œê¸ˆì•¡</span>
                                        <span class="summary-value"
                                              th:text="${#numbers.formatInteger(order.payAmount, 3)} + 'ì›'"><!-- ìµœì¢…ê²°ì œê¸ˆì•¡ --></span>
                                    </div>
                                </div>

                                <!-- ê²°ì œ ë°©ë²• ì •ë³´ -->
                                <div class="payment-method">
                                    <h3 class="method-title">ê²°ì œ ë°©ë²•</h3>
                                    <div class="method-details">
                                        <div class="method-item">
                                            <span class="method-icon">ğŸ’³</span>
                                            <div class="method-info">
                                                <span class="method-name" th:switch="${order.payMethod}">
                                                    <span th:case="'KAKAOPAY'">ì¹´ì¹´ì˜¤í˜ì´</span>
                                                    <span th:case="'TOSSPAY'">í† ìŠ¤í˜ì´</span>
                                                    <span th:case="*">ê¸°íƒ€</span>
                                                </span>
                                                <span class="method-date"
                                                      th:text="'ê²°ì œì¼ì‹œ: ' + ${#temporals.format(order.paidAt, 'yyyy.MM.dd HH:mm')}"><!-- ê²°ì œì¼ì‹œ --></span>
                                            </div>
                                            <span class="method-amount"
                                                  th:text="${#numbers.formatInteger(order.payAmount, 3)} + 'ì›'"><!-- ê²°ì œê¸ˆì•¡ --></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- =====================
                         4. ì£¼ë¬¸ ê´€ë¦¬ ë²„íŠ¼ë“¤ (ì „ì²´ í­)
                         ===================== -->
                    <div class="order-actions-card full-width">
                        <div class="card-header">
                            <h2 class="card-title">âš™ï¸ ì£¼ë¬¸ ê´€ë¦¬</h2>
                        </div>

                        <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ - ìš”ì²­ì‚¬í•­ì— ë”°ë¼ 4ê°œë§Œ -->
                        <div class="action-buttons">
                            <!-- ìƒí’ˆí›„ê¸° ì‘ì„± ë²„íŠ¼ -->
                            <button class="btn-action btn-review" onclick="writeReview()">
                                <span class="btn-icon">â­</span>
                                <span class="btn-text">ìƒí’ˆí›„ê¸° ì‘ì„±</span>
                            </button>

                            <!-- êµí™˜/ë°˜í’ˆ ë²„íŠ¼ -->
                            <button class="btn-action btn-exchange" onclick="requestExchange()">
                                <span class="btn-icon">ğŸ”„</span>
                                <span class="btn-text">êµí™˜/ë°˜í’ˆ</span>
                            </button>

                            <!-- ì£¼ë¬¸ë¬¸ì˜ ë²„íŠ¼ -->
                            <a th:href="@{/support/orders/{id}(id=${order.orderId})}" class="btn-action btn-inquiry">
                                <span class="btn-icon">â“</span>
                                <span class="btn-text">Q & A</span>
                            </a>

                            <!-- ì˜ìˆ˜ì¦ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
                            <button class="btn-action btn-receipt" onclick="downloadReceipt()">
                                <span class="btn-icon">ğŸ“„</span>
                                <span class="btn-text">ì˜ìˆ˜ì¦ ë‹¤ìš´ë¡œë“œ</span>
                            </button>
                        </div>

                        <!-- ì£¼ì˜ì‚¬í•­ ì•ˆë‚´ -->
                        <div class="order-notes">
                            <h3 class="notes-title">ğŸ“Œ ì£¼ë¬¸ ê´€ë ¨ ì•ˆë‚´</h3>
                            <ul class="notes-list">
                                <li>ë°°ì†¡ì™„ë£Œ í›„ 7ì¼ ì´ë‚´ì— êµí™˜/ë°˜í’ˆ ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
                                <li>ìƒí’ˆí›„ê¸° ì‘ì„± ì‹œ ì¶”ê°€ í¬ì¸íŠ¸ë¥¼ ì ë¦½í•´ë“œë¦½ë‹ˆë‹¤.</li>
                                <li>ì¹œí™˜ê²½ í¬ì¥ì¬ ì‚¬ìš©ìœ¼ë¡œ ì§€êµ¬ë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤. ğŸŒ</li>
                                <li>ë¬¸ì˜ì‚¬í•­ì€ ê³ ê°ì„¼í„°(1588-1234) ë˜ëŠ” ì˜¨ë¼ì¸ìœ¼ë¡œ ì ‘ìˆ˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- ========================================
         ëª¨ë‹¬ ì˜ì—­ë“¤
         ======================================== -->

    <!-- êµí™˜/ë°˜í’ˆ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="exchangeModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ”„ êµí™˜/ë°˜í’ˆ ì‹ ì²­</h3>
                <button class="modal-close" onclick="closeExchangeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="exchangeForm">
                    <div class="form-group">
                        <label>ì‹ ì²­ ìœ í˜•</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="exchangeType" value="exchange">
                                <span>êµí™˜</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="exchangeType" value="return">
                                <span>ë°˜í’ˆ</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ì‚¬ìœ </label>
                        <select name="reason" required>
                            <option value="">ì‚¬ìœ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                            <option value="defective">ìƒí’ˆ ë¶ˆëŸ‰</option>
                            <option value="different">ì£¼ë¬¸ê³¼ ë‹¤ë¥¸ ìƒí’ˆ</option>
                            <option value="damaged">ë°°ì†¡ ì¤‘ íŒŒì†</option>
                            <option value="size_issue">ì‚¬ì´ì¦ˆ ë¬¸ì œ</option>
                            <option value="other">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ìƒì„¸ ë‚´ìš©</label>
                        <textarea name="description" placeholder="ìì„¸í•œ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>ì²¨ë¶€ ì‚¬ì§„ (ì„ íƒ)</label>
                        <input type="file" name="attachments" multiple accept="image/*">
                        <small>ìƒí’ˆ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”</small>
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeExchangeModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="submitExchangeRequest()">ì‹ ì²­í•˜ê¸°</button>
            </div>
        </div>
    </div>
</div>

<th:block layout:fragment="script">
    <script th:src="@{/js/order-detail.js}"></script>

    <!-- Thymeleaf ë°ì´í„°ë¥¼ JavaScriptë¡œ ì „ë‹¬ -->
    <script th:inline="javascript">
        // ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ì£¼ë¬¸ ìƒì„¸ ë°ì´í„°
        var orderData = /*[[${order}]]*/ null;
        var user = /*[[${session.user}]]*/ null;
        // <!-- var csrfToken = /*[[${_csrf.token}]]*/ ''; -->
        // var csrfHeader = /*[[${_csrf.headerName}]]*/ '';

        <!-- Thymeleaf ë°ì´í„°ë¥¼ JavaScriptë¡œ ì „ë‹¬ -->
        // ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ì£¼ë¬¸ ìƒì„¸ ë°ì´í„°
        var orderData = /*[[${order}]]*/ null;
        var user = /*[[${session.user}]]*/ null;
        // var csrfToken = /*[[${_csrf.token}]]*/ '';
        // var csrfHeader = /*[[${_csrf.headerName}]]*/ '';

        // API URL ì„¤ì •
        var orderCancelUrl = /*[[@{/api/orders/{id}/cancel}]]*/ '/api/orders/{id}/cancel';
        var exchangeRequestUrl = /*[[@{/api/orders/{id}/exchange}]]*/ '/api/orders/{id}/exchange';
        var reviewWriteUrl = /*[[@{/orders/{id}/review}]]*/ '/orders/{id}/review';
        var reorderUrl = /*[[@{/api/orders/{id}/reorder}]]*/ '/api/orders/{id}/reorder';
        var receiptDownloadUrl = /*[[@{/api/orders/{id}/receipt}]]*/ '/api/orders/{id}/receipt';
        var trackingUrl = /*[[@{/api/delivery/tracking/}]]*/ '/api/delivery/tracking/';

        // ì£¼ë¬¸ ID ì„¤ì • (ê¸°ì¡´ order-detail.jsì—ì„œ ì‚¬ìš©)
        var currentOrderId = orderData ? orderData.orderUuid : null;

        // ë©”ì‹œì§€ ì„¤ì •
        var messages = {
        cancelSuccess: 'ì£¼ë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.',
        cancelError: 'ì£¼ë¬¸ ì·¨ì†Œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
        exchangeSuccess: 'êµí™˜/ë°˜í’ˆ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
        exchangeError: 'êµí™˜/ë°˜í’ˆ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
        reorderSuccess: 'ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.',
        reorderError: 'ì¬ì£¼ë¬¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
        };

        // í˜ì´ì§€ ë¡œë“œ í›„ ì£¼ë¬¸ ë°ì´í„°ë¡œ í™”ë©´ ì—…ë°ì´íŠ¸
        document.addEventListener('DOMContentLoaded', function() {
            if (orderData) {
            // ê¸°ì¡´ order-detail.jsì˜ displayOrderData í•¨ìˆ˜ í˜¸ì¶œ
            displayOrderData(orderData);
            }
        });

        // ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜ë“¤ (ê¸°ì¡´ ì½”ë“œì™€ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€)
        function closeCancelModal() {
        document.getElementById('cancelOrderModal').style.display = 'none';
    }

        function closeExchangeModal() {
        document.getElementById('exchangeModal').style.display = 'none';
        }

        function confirmCancelOrder() {
        // ì‹¤ì œ ì·¨ì†Œ ì²˜ë¦¬ ë¡œì§
        closeCancelModal();
        cancelOrder();
        }

        function submitExchangeRequest() {
        // ì‹¤ì œ êµí™˜/ë°˜í’ˆ ì‹ ì²­ ë¡œì§
        closeExchangeModal();
        showNotification('êµí™˜/ë°˜í’ˆ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        function requestExchange() {
        document.getElementById('exchangeModal').style.display = 'flex';
        }

        function cancelOrder() {
        document.getElementById('cancelOrderModal').style.display = 'flex';
        }
    </script>
</th:block>
</body>
</html>